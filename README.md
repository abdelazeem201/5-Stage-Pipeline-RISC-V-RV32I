# Design-and-Implement-a-RISC-V-processor-with-5-pipeline-stages.
The goal of this Project is to design a RISC-V processor with 5 pipeline stages. The lite version of the RISC-V processor supports only a limited subset of the whole RV32I instruction set, but in the design here reported all the standard instructions except ECALL, EBREAK, and FENCE are implemented. 

The processor is tested by simulating the execution of a program that computes the minimum absolute value of an array of integers. After that, a custom instruction is added in order to compute the absolute value in a single clock cycle using some additional hardware. At this point the program is improved using the new instruction and simulated once again. Finally, a comparison between the two version is made in order to evaluate the advantages and the disadvantages of the two approaches. Both the version of the processor are synthesized in a 45nm standard-cell library and then place-and-routed in a physical design.

# Features

| 32-bit RISC CPU  | 
| -------------    | 
| Five stages pipeline with forwarding  | 
| Automatic hazard detection            | 
| Up to 4GB of addressing space         |
| Branch target buffer with 4-way 8-set associative cache 8-bit TAG, LRU policy replacement |
|Ready for multi-cycle arithmetic operations |
| Absolute value custom instruction |

| 45 nm CMOS technology |
| --------------------- |
| Max clock frequency: 500MHz |
| Supply voltage: 1:1V |
| Total power dissipation: 15:21mW |
| Silicon die: 226 μm x 226 μm |

# RISC-V

The top level view of the processor is shown in figure 1.1, it has in addition to the clock and the reset
ports, an interface for the IRAM (Instruction RAM) and one for the DRAM (Data RAM). Inside it
we find the following blocks:

• The datapath: it is the block where both the memories are connected from the outside except
for the DRAM write enable that is driven by the CU (Control Unit). Furthermore it receives the
control from the CU, the FU (Forwarding Unit), and the HDU (Hazard Detection Unit), while
the only output signal is the misprediction one, used by the BPU (Branch Prediction Unit) to
inform the HDU that an hazard have occured.

• A set of registers used to keep track of all the instructions running inside the pipeline.

• The CU, which receives the instruction in the ID stage and according to this produces the
appropriate control outputs.

• A set of registers that propagate the CU outputs, in order to send the signals to the datapath
at the right time depending on the pipeline stage where they are used.

• The FU that reading all the instruction in execution from the second stage to the last stage
can detect the data dependencies and, when it is possible, avoids the data hazard bypassing the
data between the pipeline stages.

• The HDU, according on the instruction in the second and in the third stage and on the mispre-
diction signal (received by the BPU inside the datapath) it has the ability to stop some pipeline
stages and to discard an already fetched instruction, in order to avoid any kind of hazard.

![Figure 1.1: RISC-V top view diagram.](https://github.com/abdelazeem201/Design-and-Implementation-of-RISCV-processor-with-5-pipeline-stages./blob/main/Figures/RISC-V.png)

# Testbench

the designs are simulated three times: pre-synthesis, post-synthesis, and post-place-and-route. The post-synthesis and post-place-and-route simulations are required in order to verify that the netlists generated by Synopsys Design Compiler and Cadence Innovous work properly and there
are no non-synthesizable VHDLs.

![Figure 2.1: Testbench structure.](https://github.com/abdelazeem201/Design-and-Implementation-of-RISCV-processor-with-5-pipeline-stages./blob/main/Figures/testbench.png)
 
![(a) Pre-synthesis.](https://github.com/abdelazeem201/Design-and-Implementation-of-RISCV-processor-with-5-pipeline-stages./blob/main/Figures/simulation.png)






